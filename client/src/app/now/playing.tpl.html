<div ng-switch on="loading" ng-class="{loading : loading, now : !loading}">
    <div ng-switch-when="true" class="loading"><div class="aphelion"></div></div>
    <div ng-switch-when="false">
        <div ng-switch on="library.item.type" class="playing">
            <div ng-switch-when="movie">
                <div ng-include src="'movie/details.tpl.html'"></div>
            </div>

            <div ng-switch-when="episode">
                <div ng-include src="'tvshow/details.tpl.html'"></div>
            </div>

            <div ng-switch-default class="detail">
                <img class="row" image image-source="library.item.thumbnail | asset:configuration.host"/>
                <h1>
                    {{library.item.label}}
                </h1>
            </div>
        </div>
        <div class="player">
            <div class="row controls">
                <div class="span3 action" ng-tap="toggleAudioStreams()" ng-show="isTypeVideo()">
                    <i class="icon-comments"></i>
                </div>
                <div class="times" ng-tap="toggleTimePicker()" ng-class="{span6 : isTypeVideo(), span12 : !isTypeVideo()}">
                    {{player.seek.time | time | date:'HH:mm:ss'}}/
                    {{player.seek.totaltime | time | date:'HH:mm:ss'}}
                    [-{{(player.seek.totaltime - player.seek.time)  | time | date:'HH:mm:ss'}}]
                </div>
                <div class="span3 action" ng-tap="toggleSubtitles()" ng-show="isTypeVideo()">
                    <i class="icon-quote-left"></i>
                </div>
            </div>
            <div role="slider" class="row" seekbar seekbar-value="player.seek.percentage" seekbar-max="100"
                         on-seekbar-changed="onSeekbarChanged(newValue)"></div>
            <div class="row controls">
                <div class="span3" ng-tap="xbmc.previous()">
                    <i class="icon-fast-backward"></i>
                </div>
                <div class="span3" ng-tap="xbmc.togglePlay()">
                    <i class="icon-play" ng-show="!player.speed"></i>
                    <i class="icon-pause" ng-show="player.speed"></i>
                </div>
                <div class="span3" ng-tap="xbmc.stop()">
                    <i class="icon-stop"></i>
                </div>
                <div class="span3" ng-tap="xbmc.next()">
                    <i class="icon-fast-forward"></i>
                </div>
            </div>
        </div>
    </div>
</div>

<form role="dialog" data-type="action" class="chooser" onsubmit="return false;" ng-show="showAudioSelect">
     <div class="content">
        <header> Audio Streams </header>
        <div class="body">
            <button ng-repeat="audio in player.audiostreams" ng-tap="setAudioStream(audio)">
              {{audio.name}} ( {{audio.language}})
              <i class="pull-right icon-check" ng-show="isSelected(player.current.audiostream, audio)"></i>
            </button>
        </div>
        <div class="actions">
            <button ng-tap="toggleAudioStreams()"> Cancel </button>
        </div>
    </div>
</form>

<form role="dialog" data-type="action" class="chooser" onsubmit="return false;" ng-show="showSubtitleSelect">
     <div class="content">
        <header> Subtitles </header>
        <div class="body">
            <button ng-tap="setSubtitle('off')">
                None
                <i class="pull-right icon-check" ng-show="isSelected(player.current.subtitle, 'off')"></i>
            </button>
            <button ng-repeat="subtitle in player.subtitles" ng-tap="setSubtitle(subtitle)">
                {{subtitle.name}} ({{subtitle.language}})
                <i class="pull-right icon-check" ng-show="isSelected(player.current.subtitle, subtitle)"></i>
            </button>
        </div>
        <div class="actions">
            <button ng-tap="toggleSubtitles()"> Cancel </button>
        </div>
    </div>
</form>

<form role="dialog" data-type="action" class="chooser" onsubmit="return false;" ng-show="showTimePicker">
    <div class="content">
        <header>Select time </header>
        <div class="body">
            <div class="time">
                <div ng-model="seekTime" class="picker">
                  <timepicker hour-step="1" minute-step="1" show-meridian="false"></timepicker>
                </div>
            </div>
        </div>
        <div class="actions">
            <button  ng-tap="toggleTimePicker()"> Cancel </button>
            <button class="recommend" ng-tap="onValidateSeekTime()"> Ok </button>
        </div>
    </div>
</form>